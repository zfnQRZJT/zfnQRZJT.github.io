<!doctype html>
<html>
  <head>
    <title>Region simulator</title>
    <script>
      const find = function(elem) {return(document.getElementById(elem));}
      var N; var ctx; var pointlocs; var lines;
      const regenerate = function() {
        N = find("howmanypoints").value;
        ctx = find("cv").getContext('2d');
        pointlocs = [];
        for (let i = 0; i < N; i++) {
          let x = 600*Math.random() - 300; let y;
          if (find("convex").checked) {
            y = Math.sqrt(300*300 - x*x)*(2*Math.floor(2*Math.random()) - 1);
          } else {
            y = 600*Math.random() - 300;
          }
          pointlocs.push([x + Math.random()*10,y + Math.random()*10]);
        }
        //now we have a bunch of points and have to connect them
        lines = [];
        for (let i = 0; i < N; i++) {
          let currarr = [];
          for (let j = 0; j < i; j++) {
            let thissplit = [[],[]];
            let p1 = pointlocs[i]; let p2 = pointlocs[j]; let sl = (p2[1] - p1[1])/(p2[0] - p1[0]);
            for (let k = 0; k < N; k++) {
              if (k !== i && k !== j) {
                if (pointlocs[k][0]*sl + p1[1] - sl*p1[0] < pointlocs[k][1]) {
                  thissplit[0].push(k);
                } else {
                  thissplit[1].push(k);
                }
              }
            }
            currarr.push([sl,p1[1] - sl*p1[0],thissplit]);
          }
          lines.push(JSON.parse(JSON.stringify(currarr)));
        }
        //now we have to find all those line intersections yayyyyy
        for (let i = 1; i < N; i++) {
          for (let j = 0; j < i; j++) {
            let thesplit = lines[i][j][2];
            //for (let k = 0; k < 
          }
        }
      }
      window.onload = regenerate;
    </script>
  </head>
  <body>
    <input id="howmanypoints" type="range" min="3" max="15"><br>
    <input id="convex" type="checkbox"><label for="convex">Convex or not</label><br>
    <canvas id="cv" width="800" height="800"></canvas>
  </body>
</html>
